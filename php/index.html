<html lang="ru">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Task 1 - img</title>
    <link rel="stylesheet" type="text/css" href="/front/2.css" />
    <link rel="stylesheet" type="text/css" href="/front/3.css" />
    <link rel="stylesheet" type="text/css" href="/php/php.css" />

</head>

<body>
    <ul>
        <li><a href="/">Home</a></li>

        <li class="dropdown">
            <a href="#">Tasks</a>
            <div class="dropdown-content">
                <a href="/front/1.html">Task 1-3</a>
                <a href="/front/4.html">Task 4,6</a>
                <a href="/front/7.html">Task 7</a>
                <a href="/php">Task 7</a>
                <a href="/front/9.html">Task 9</a>
            </div>
        </li>
    </ul>
    <div class="content">
        <div class="get">

            <br>
            <input value="code"></input>
            <button>Get code</button>
        </div>

        <div class="check">
            <span>invalid</span>
            <br>
            <input value="code"></input>
            <button>Check code</button>
        </div>
    </div>
    <script src="/front/scripts/jq.js"></script>
    <script>
        var get = $('.get>button');
        var getCode = $('.get>input');
        var check = $('.check>button');
        var checkCode = $('.check>input');
        var checkStatus = $('.check>span');
        get.click(async e => {
            let code = await fetch('/php/2fa/?type=get');
            getCode.val(await code.text());
        })
        check.click(async e => {
            let status = await fetch(`/php/2fa/?type=check&code=${checkCode.val()}`);
            status = await status.text();
            if (status == '1') {
                checkStatus.text('valid')
                checkStatus.css('color', 'green')
            } else {
                checkStatus.text('invalid')
                checkStatus.css('color', '')
            }
        })
    </script>
</body>

</html>